# 模板语法

如果你曾经使用过 EJS，那么 Eta 的语法会让你感到熟悉。你很快就能掌握它！

## 基础语法

传入的数据在 `it` 变量中可用。

**要输出数据**，使用 `<%=` 开始标签。

```js
Hi <%= it.name %>
```

默认情况下，Eta 会自动对输出的数据进行 XML 转义。**要允许原始 HTML**，使用 `<%~` 开始标签。

```js
Hi <%~ it.contentContainingHTML %>
```

**要执行 JavaScript**，使用 `<%` 开始标签。

```js
<% let myVar = 3 %>
```

**注释**就像常规的 JavaScript 多行注释！

```js
<% /* 这是一个注释 */ %>
```

## 局部模板和布局

局部模板就像常规模板一样，只不过它们在其他模板内部渲染。

**要渲染局部模板**，使用 `<%~` 开始标签 + `include()` 函数。

```js
<%~ include("./path-to-partial") %>
<% /* 我们也可以传入数据，这些数据将与 `it` 合并并传递给局部模板 */ %>
<%~ include("./path-to-partial", { option: true }) %>
```

**要渲染异步局部模板**，使用 `<%~` 开始标签 + `includeAsync()` 函数。

```js
<%~ await includeAsync("./path-to-partial") %>
```

一个模板文件只能有一个父布局（尽管布局本身可以有父布局）。**要设置父布局**，使用 `layout()` 函数。

```js
<% layout("./path-to-layout") %>
```

要在布局中渲染子内容，使用 `it.body`。

```
<%~ it.body %>
```

### 局部模板和布局的名称解析

如果你在 Node.js 或 Deno 中运行 Eta，Eta 会自动尝试从文件系统内部解析局部模板和布局。例如 `<%~ include("/header.eta") %>` 会在项目的 `views` 目录中查找名为 `header.eta` 的文件。

但如果你想包含一个不存在于文件系统中的局部模板/布局呢？也许你以编程方式将其定义为字符串或从互联网加载。有一个解决方案：如果你以 `@` 符号开头命名模板，Eta 将知道在内部模板存储中查找而不是在文件系统中。

```js
<%~ include("@header") %>
```

## 空白控制

*注意："分隔符"指的是开始或结束标签。*

开始分隔符后面可以跟 `-` 或 `_`，结束分隔符前面可以加 `-` 或 `_`。

在标签开头使用 `_` 将修剪其前面的所有空白，在标签末尾使用 `_` 将修剪其后面的所有空白。

在标签开头使用 `-` 将修剪其前面的 1 个换行符，在标签末尾使用 `-` 将修剪其后面的 1 个换行符。

```js
Hi
<%- = it.myname %>
<% /* "Hi" 后面的换行符将被去除 */ %>
```