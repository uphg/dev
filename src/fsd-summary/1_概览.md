# 概览

**Feature-Sliced Design**（FSD）是一种用于构建前端应用程序的架构方法论

## FSD 适合以下场景

- 前端开发（网页、移动端、桌面端等 UI）。
- 一个应用程序，而不是一个库。

## 基本示例

这里是一个实现了 FSD 的简单项目：

- `📁 app`
- `📁 pages`
- `📁 shared`

这些顶级文件夹被称为_层_。让我们更深入地看看：

- 📂 app
  - 📁 routes
  - 📁 analytics
- 📂 pages
  - 📁 home
  - 📂 article-reader
    - 📁 ui
    - 📁 api
  - 📁 settings
- 📂 shared
  - 📁 ui
  - 📁 api

`📂 pages` 内的文件夹被称为**切片(Slices)**。它们按领域分割层（在 pages 中按页面分割）。

`📂 app`、`📂 shared` 和 `📂 pages/article-reader` 内的文件夹被称为**段 (Segments)**，它们按技术目的分割切片（或层），即代码的用途。

## 概念

Layers、切片(Slices) 和段 (Segments) 形成这样的层次结构

![Hierarchy of FSD concepts, described below](https://feature-sliced.github.io/documentation/zh/assets/images/visual_schema-e826067f573946613dcdc76e3f585082.jpg)

主要分为三个层次

- "Layers" 支柱包含七个从上到下排列的部分，分别标记为 "app"、"processes"、"pages"、"widgets"、"features"、"entities" 和 "shared"。"processes" 部分被划掉了。"entities" 部分连接到第二个支柱 "Slices"，表示第二个支柱是 "entities" 的内容。

- "Slices" 支柱包含三个从上到下排列的部分，分别标记为 "user"、"post" 和 "comment"。"post" 部分以同样的方式连接到第三个支柱 "Segments"，表示它是 "post" 的内容。

- "Segments" 支柱包含三个从上到下排列的部分，分别标记为 "ui"、"model" 和 "api"。



### Layers

Layers 在所有 FSD 项目中都是标准化的。您不必使用所有的 layers，但它们的名称很重要。目前有七个（从上到下）：

1. **App** — 应用程序运行的基础代码 — 路由、入口点、全局样式、providers 等。
2. **Processes**（已废弃）— 复杂的跨页面场景。
3. **Pages** — 带有层级的页面内容。
4. **Widgets（部件）**— 组合多个 Features 和 Entities 形成的复杂UI区块，如：`user-profile`（用户资料卡）、`product-card`（商品卡片）、`comments-section`（评论区域）。
5. **Features（交互功能）**— 具体的产品功能，用户的业务"动作"，如：`auth-by-username`（用户名登录）、`add-to-cart`（加入购物车）。
6. **Entities（实体）** — 最基础的业务实体，与具体业务场景无关，如：`User`（用户）、`Product`（产品）、`Order`（订单）、`Comment`（评论）。
7. **Shared** — 可重用功能，特别是当它与项目/业务的具体细节分离时，但不一定如此。



::: tip

Layers 除了 **App** 和 **Shared** 没有切片直接分为段。其他的 layers — **Entities**、**Features**、**Widgets** 和 **Pages** 都要先创建切片，然后再在切片中创建段。

:::

### 切片

slices 的主要思想是按业务分割代码，你可以根据业务自由组织命名。

还有，切片不能使用同一层的其他切片，这有助于实现高内聚和低耦合

### 段

切片中的内容以及 layers App 和 Shared 由段组成，段按代码的用途进行分组。段的名称不受约束，但有几种常见的约定俗成的名称：

- `ui` — 与用户界面显示相关的所有内容：UI 组件、日期格式化工具、样式等。
- `api` — 后端交互：请求函数、数据类型、映射器等。
- `model` — 数据模型：模式、接口、存储及业务逻辑。
- `lib` — 该切片中其他模块所需的库代码。
- `config` — 配置文件与功能开关。

一般来说这些段足够大多数项目的 layers 使用

## 优点

- **统一性**

  它们的结构是标准化的，可以让项目更统一，可以让团队新成员快速融入开发。

- **面对变化和重构的稳定性**

  同级的 layer 要相互独立，不能相互引用或者引用上层 layer。

  这样即使你修改了当前 layer，也不会对其他 layer 造成影响。

- **可控的逻辑重用**
  根据 layer，您可以使代码非常可重用并且非常本地化。
  在遵循 **DRY** 原则和实用性之间保持平衡。

- **面向业务和用户需求**
  应用程序被分割为业务领域，并鼓励在命名中使用业务语言，这样你可以在不完全理解项目的所有其他不相关部分的情况下完成工作。

## 渐进式迁移

如果你想将现有代码库迁移到 FSD，建议按照以下策略：

1. 逐步迁移 App 和 Shared layers，以创建基础代码。
2. 粗略的将所有现有 UI 组件放在 Widgets 和 Pages 中，即使并不是完全遵守 FSD 规则。
3. 逐渐按照规则迁移代码，并提取 Entities、Features 等。